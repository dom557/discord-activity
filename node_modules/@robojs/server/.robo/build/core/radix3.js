/**
 * This was forked from radix3 (MIT License)
 * https://github.com/unjs/radix3
 *
 * It was done to minimize size and remove unnecessary features.
 */ export const NODE_TYPES = {
    NORMAL: 0,
    WILDCARD: 1,
    PLACEHOLDER: 2
};
export function createRouter(options = {}) {
    const ctx = {
        options,
        rootNode: createRadixNode(),
        staticRoutesMap: {}
    };
    const normalizeTrailingSlash = (p)=>options.strictTrailingSlash ? p : p.replace(/\/$/, '') || '/';
    if (options.routes) {
        for(const path in options.routes){
            insert(ctx, normalizeTrailingSlash(path), options.routes[path]);
        }
    }
    return {
        ctx,
        // @ts-expect-error - this is fine
        lookup: (path)=>lookup(ctx, normalizeTrailingSlash(path)),
        insert: (path, data)=>insert(ctx, normalizeTrailingSlash(path), data),
        remove: (path)=>remove(ctx, normalizeTrailingSlash(path))
    };
}
function lookup(ctx, path) {
    const staticPathNode = ctx.staticRoutesMap[path];
    if (staticPathNode) {
        return staticPathNode.data;
    }
    const sections = path.split('/');
    const params = {};
    let paramsFound = false;
    let wildcardNode = null;
    let node = ctx.rootNode;
    let wildCardParam = null;
    for(let i = 0; i < sections.length; i++){
        const section = sections[i];
        if (node.wildcardChildNode !== null) {
            wildcardNode = node.wildcardChildNode;
            wildCardParam = sections.slice(i).join('/');
        }
        // Exact matches take precedence over placeholders
        const nextNode = node.children.get(section);
        if (nextNode !== undefined) {
            node = nextNode;
        } else {
            node = node.placeholderChildNode;
            if (node !== null) {
                params[node.paramName] = section;
                paramsFound = true;
            } else {
                break;
            }
        }
    }
    if ((node === null || node.data === null) && wildcardNode !== null) {
        node = wildcardNode;
        params[node.paramName || '_'] = wildCardParam;
        paramsFound = true;
    }
    if (!node) {
        return null;
    }
    if (paramsFound) {
        return {
            ...node.data,
            params: paramsFound ? params : undefined
        };
    }
    return node.data;
}
function insert(ctx, path, data) {
    let isStaticRoute = true;
    const sections = path.split('/');
    let node = ctx.rootNode;
    let _unnamedPlaceholderCtr = 0;
    for (const section of sections){
        let childNode;
        if (childNode = node.children.get(section)) {
            node = childNode;
        } else {
            const type = getNodeType(section);
            // Create new node to represent the next part of the path
            childNode = createRadixNode({
                type,
                parent: node
            });
            node.children.set(section, childNode);
            if (type === NODE_TYPES.PLACEHOLDER) {
                childNode.paramName = section === '*' ? `_${_unnamedPlaceholderCtr++}` : section.slice(1);
                node.placeholderChildNode = childNode;
                isStaticRoute = false;
            } else if (type === NODE_TYPES.WILDCARD) {
                node.wildcardChildNode = childNode;
                childNode.paramName = section.slice(3 /* "**:" */ ) || '_';
                isStaticRoute = false;
            }
            node = childNode;
        }
    }
    // Store whatever data was provided into the node
    node.data = data;
    // Optimization, if a route is static and does not have any
    // variable sections, we can store it into a map for faster retrievals
    if (isStaticRoute === true) {
        ctx.staticRoutesMap[path] = node;
    }
    return node;
}
function remove(ctx, path) {
    let success = false;
    const sections = path.split('/');
    let node = ctx.rootNode;
    for (const section of sections){
        node = node.children.get(section);
        if (!node) {
            return success;
        }
    }
    if (node.data) {
        const lastSection = sections[sections.length - 1];
        node.data = null;
        if (Object.keys(node.children).length === 0) {
            const parentNode = node.parent;
            parentNode.children.delete(lastSection);
            parentNode.wildcardChildNode = null;
            parentNode.placeholderChildNode = null;
        }
        success = true;
    }
    return success;
}
function createRadixNode(options = {}) {
    return {
        type: options.type || NODE_TYPES.NORMAL,
        parent: options.parent || null,
        children: new Map(),
        data: options.data || null,
        paramName: options.paramName || null,
        wildcardChildNode: null,
        placeholderChildNode: null
    };
}
function getNodeType(str) {
    if (str.startsWith('**')) {
        return NODE_TYPES.WILDCARD;
    }
    if (str[0] === ':' || str === '*') {
        return NODE_TYPES.PLACEHOLDER;
    }
    return NODE_TYPES.NORMAL;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL3JvYm8uanMvcm9iby5qcy9wYWNrYWdlcy9wbHVnaW4tYXBpL3NyYy9jb3JlL3JhZGl4My50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgd2FzIGZvcmtlZCBmcm9tIHJhZGl4MyAoTUlUIExpY2Vuc2UpXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdW5qcy9yYWRpeDNcbiAqXG4gKiBJdCB3YXMgZG9uZSB0byBtaW5pbWl6ZSBzaXplIGFuZCByZW1vdmUgdW5uZWNlc3NhcnkgZmVhdHVyZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBOT0RFX1RZUEVTID0ge1xuXHROT1JNQUw6IDAgYXMgY29uc3QsXG5cdFdJTERDQVJEOiAxIGFzIGNvbnN0LFxuXHRQTEFDRUhPTERFUjogMiBhcyBjb25zdFxufVxuXG50eXBlIF9OT0RFX1RZUEVTID0gdHlwZW9mIE5PREVfVFlQRVNcbmV4cG9ydCB0eXBlIE5PREVfVFlQRSA9IF9OT0RFX1RZUEVTW2tleW9mIF9OT0RFX1RZUEVTXVxuXG50eXBlIF9SYWRpeE5vZGVEYXRhT2JqZWN0ID0geyBwYXJhbXM/OiBuZXZlcjsgW2tleTogc3RyaW5nXTogdW5rbm93biB9XG5leHBvcnQgdHlwZSBSYWRpeE5vZGVEYXRhPFQgZXh0ZW5kcyBfUmFkaXhOb2RlRGF0YU9iamVjdCA9IF9SYWRpeE5vZGVEYXRhT2JqZWN0PiA9IFRcbmV4cG9ydCB0eXBlIE1hdGNoZWRSb3V0ZTxUIGV4dGVuZHMgUmFkaXhOb2RlRGF0YSA9IFJhZGl4Tm9kZURhdGE+ID0gT21pdDxULCAncGFyYW1zJz4gJiB7XG5cdHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFkaXhOb2RlPFQgZXh0ZW5kcyBSYWRpeE5vZGVEYXRhID0gUmFkaXhOb2RlRGF0YT4ge1xuXHR0eXBlOiBOT0RFX1RZUEVcblx0cGFyZW50OiBSYWRpeE5vZGU8VD4gfCBudWxsXG5cdGNoaWxkcmVuOiBNYXA8c3RyaW5nLCBSYWRpeE5vZGU8VD4+XG5cdGRhdGE6IFJhZGl4Tm9kZURhdGEgfCBudWxsXG5cdHBhcmFtTmFtZTogc3RyaW5nIHwgbnVsbFxuXHR3aWxkY2FyZENoaWxkTm9kZTogUmFkaXhOb2RlPFQ+IHwgbnVsbFxuXHRwbGFjZWhvbGRlckNoaWxkTm9kZTogUmFkaXhOb2RlPFQ+IHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhZGl4Um91dGVyT3B0aW9ucyB7XG5cdHN0cmljdFRyYWlsaW5nU2xhc2g/OiBib29sZWFuXG5cdHJvdXRlcz86IFJlY29yZDxzdHJpbmcsIF9SYWRpeE5vZGVEYXRhT2JqZWN0PlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhZGl4Um91dGVyQ29udGV4dDxUIGV4dGVuZHMgUmFkaXhOb2RlRGF0YSA9IFJhZGl4Tm9kZURhdGE+IHtcblx0b3B0aW9uczogUmFkaXhSb3V0ZXJPcHRpb25zXG5cdHJvb3ROb2RlOiBSYWRpeE5vZGU8VD5cblx0c3RhdGljUm91dGVzTWFwOiBSZWNvcmQ8c3RyaW5nLCBSYWRpeE5vZGU+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFkaXhSb3V0ZXI8VCBleHRlbmRzIFJhZGl4Tm9kZURhdGEgPSBSYWRpeE5vZGVEYXRhPiB7XG5cdGN0eDogUmFkaXhSb3V0ZXJDb250ZXh0PFQ+XG5cblx0LyoqXG5cdCAqIFBlcmZvcm0gbG9va3VwIG9mIGdpdmVuIHBhdGggaW4gcmFkaXggdHJlZVxuXHQgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaCBmb3Jcblx0ICpcblx0ICogQHJldHVybnMgVGhlIGRhdGEgdGhhdCB3YXMgb3JpZ2luYWxseSBpbnNlcnRlZCBpbnRvIHRoZSB0cmVlXG5cdCAqL1xuXHRsb29rdXAocGF0aDogc3RyaW5nKTogTWF0Y2hlZFJvdXRlPFQ+IHwgbnVsbFxuXG5cdC8qKlxuXHQgKiBQZXJmb3JtIGFuIGluc2VydCBpbnRvIHRoZSByYWRpeCB0cmVlXG5cdCAqIEBwYXJhbSBwYXRoIC0gdGhlIHByZWZpeCB0byBtYXRjaFxuXHQgKiBAcGFyYW0gZGF0YSAtIHRoZSBhc3NvY2lhdGVkIGRhdGEgdG8gcGF0aFxuXHQgKlxuXHQgKi9cblx0aW5zZXJ0KHBhdGg6IHN0cmluZywgZGF0YTogVCB8IHVua25vd24pOiB2b2lkXG5cblx0LyoqXG5cdCAqIFBlcmZvcm0gYSByZW1vdmUgb24gdGhlIHRyZWVcblx0ICogQHBhcmFtIHsgc3RyaW5nIH0gZGF0YS5wYXRoIC0gdGhlIHJvdXRlIHRvIG1hdGNoXG5cdCAqXG5cdCAqIEByZXR1cm5zIEEgYm9vbGVhbiBzaWduaWZ5aW5nIGlmIHRoZSByZW1vdmUgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90XG5cdCAqL1xuXHRyZW1vdmUocGF0aDogc3RyaW5nKTogYm9vbGVhblxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUm91dGVyPFQgZXh0ZW5kcyBSYWRpeE5vZGVEYXRhID0gUmFkaXhOb2RlRGF0YT4oXG5cdG9wdGlvbnM6IFJhZGl4Um91dGVyT3B0aW9ucyA9IHt9XG4pOiBSYWRpeFJvdXRlcjxUPiB7XG5cdGNvbnN0IGN0eDogUmFkaXhSb3V0ZXJDb250ZXh0ID0ge1xuXHRcdG9wdGlvbnMsXG5cdFx0cm9vdE5vZGU6IGNyZWF0ZVJhZGl4Tm9kZSgpLFxuXHRcdHN0YXRpY1JvdXRlc01hcDoge31cblx0fVxuXG5cdGNvbnN0IG5vcm1hbGl6ZVRyYWlsaW5nU2xhc2ggPSAocDogc3RyaW5nKSA9PiAob3B0aW9ucy5zdHJpY3RUcmFpbGluZ1NsYXNoID8gcCA6IHAucmVwbGFjZSgvXFwvJC8sICcnKSB8fCAnLycpXG5cblx0aWYgKG9wdGlvbnMucm91dGVzKSB7XG5cdFx0Zm9yIChjb25zdCBwYXRoIGluIG9wdGlvbnMucm91dGVzKSB7XG5cdFx0XHRpbnNlcnQoY3R4LCBub3JtYWxpemVUcmFpbGluZ1NsYXNoKHBhdGgpLCBvcHRpb25zLnJvdXRlc1twYXRoXSlcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGN0eCxcblx0XHQvLyBAdHMtZXhwZWN0LWVycm9yIC0gdGhpcyBpcyBmaW5lXG5cdFx0bG9va3VwOiAocGF0aDogc3RyaW5nKSA9PiBsb29rdXAoY3R4LCBub3JtYWxpemVUcmFpbGluZ1NsYXNoKHBhdGgpKSxcblx0XHRpbnNlcnQ6IChwYXRoOiBzdHJpbmcsIGRhdGE6IHVua25vd24pID0+IGluc2VydChjdHgsIG5vcm1hbGl6ZVRyYWlsaW5nU2xhc2gocGF0aCksIGRhdGEpLFxuXHRcdHJlbW92ZTogKHBhdGg6IHN0cmluZykgPT4gcmVtb3ZlKGN0eCwgbm9ybWFsaXplVHJhaWxpbmdTbGFzaChwYXRoKSlcblx0fVxufVxuXG5mdW5jdGlvbiBsb29rdXAoY3R4OiBSYWRpeFJvdXRlckNvbnRleHQsIHBhdGg6IHN0cmluZyk6IE1hdGNoZWRSb3V0ZSB7XG5cdGNvbnN0IHN0YXRpY1BhdGhOb2RlID0gY3R4LnN0YXRpY1JvdXRlc01hcFtwYXRoXVxuXHRpZiAoc3RhdGljUGF0aE5vZGUpIHtcblx0XHRyZXR1cm4gc3RhdGljUGF0aE5vZGUuZGF0YVxuXHR9XG5cblx0Y29uc3Qgc2VjdGlvbnMgPSBwYXRoLnNwbGl0KCcvJylcblxuXHRjb25zdCBwYXJhbXM6IE1hdGNoZWRSb3V0ZVsncGFyYW1zJ10gPSB7fVxuXHRsZXQgcGFyYW1zRm91bmQgPSBmYWxzZVxuXHRsZXQgd2lsZGNhcmROb2RlID0gbnVsbFxuXHRsZXQgbm9kZSA9IGN0eC5yb290Tm9kZVxuXHRsZXQgd2lsZENhcmRQYXJhbSA9IG51bGxcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3Qgc2VjdGlvbiA9IHNlY3Rpb25zW2ldXG5cblx0XHRpZiAobm9kZS53aWxkY2FyZENoaWxkTm9kZSAhPT0gbnVsbCkge1xuXHRcdFx0d2lsZGNhcmROb2RlID0gbm9kZS53aWxkY2FyZENoaWxkTm9kZVxuXHRcdFx0d2lsZENhcmRQYXJhbSA9IHNlY3Rpb25zLnNsaWNlKGkpLmpvaW4oJy8nKVxuXHRcdH1cblxuXHRcdC8vIEV4YWN0IG1hdGNoZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcGxhY2Vob2xkZXJzXG5cdFx0Y29uc3QgbmV4dE5vZGUgPSBub2RlLmNoaWxkcmVuLmdldChzZWN0aW9uKVxuXHRcdGlmIChuZXh0Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRub2RlID0gbmV4dE5vZGVcblx0XHR9IGVsc2Uge1xuXHRcdFx0bm9kZSA9IG5vZGUucGxhY2Vob2xkZXJDaGlsZE5vZGVcblx0XHRcdGlmIChub2RlICE9PSBudWxsKSB7XG5cdFx0XHRcdHBhcmFtc1tub2RlLnBhcmFtTmFtZV0gPSBzZWN0aW9uXG5cdFx0XHRcdHBhcmFtc0ZvdW5kID0gdHJ1ZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoKG5vZGUgPT09IG51bGwgfHwgbm9kZS5kYXRhID09PSBudWxsKSAmJiB3aWxkY2FyZE5vZGUgIT09IG51bGwpIHtcblx0XHRub2RlID0gd2lsZGNhcmROb2RlXG5cdFx0cGFyYW1zW25vZGUucGFyYW1OYW1lIHx8ICdfJ10gPSB3aWxkQ2FyZFBhcmFtXG5cdFx0cGFyYW1zRm91bmQgPSB0cnVlXG5cdH1cblxuXHRpZiAoIW5vZGUpIHtcblx0XHRyZXR1cm4gbnVsbFxuXHR9XG5cblx0aWYgKHBhcmFtc0ZvdW5kKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLm5vZGUuZGF0YSxcblx0XHRcdHBhcmFtczogcGFyYW1zRm91bmQgPyBwYXJhbXMgOiB1bmRlZmluZWRcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbm9kZS5kYXRhXG59XG5cbmZ1bmN0aW9uIGluc2VydChjdHg6IFJhZGl4Um91dGVyQ29udGV4dCwgcGF0aDogc3RyaW5nLCBkYXRhOiB1bmtub3duKSB7XG5cdGxldCBpc1N0YXRpY1JvdXRlID0gdHJ1ZVxuXG5cdGNvbnN0IHNlY3Rpb25zID0gcGF0aC5zcGxpdCgnLycpXG5cblx0bGV0IG5vZGUgPSBjdHgucm9vdE5vZGVcblxuXHRsZXQgX3VubmFtZWRQbGFjZWhvbGRlckN0ciA9IDBcblxuXHRmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcblx0XHRsZXQgY2hpbGROb2RlOiBSYWRpeE5vZGU8UmFkaXhOb2RlRGF0YT5cblxuXHRcdGlmICgoY2hpbGROb2RlID0gbm9kZS5jaGlsZHJlbi5nZXQoc2VjdGlvbikpKSB7XG5cdFx0XHRub2RlID0gY2hpbGROb2RlXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHR5cGUgPSBnZXROb2RlVHlwZShzZWN0aW9uKVxuXG5cdFx0XHQvLyBDcmVhdGUgbmV3IG5vZGUgdG8gcmVwcmVzZW50IHRoZSBuZXh0IHBhcnQgb2YgdGhlIHBhdGhcblx0XHRcdGNoaWxkTm9kZSA9IGNyZWF0ZVJhZGl4Tm9kZSh7IHR5cGUsIHBhcmVudDogbm9kZSB9KVxuXG5cdFx0XHRub2RlLmNoaWxkcmVuLnNldChzZWN0aW9uLCBjaGlsZE5vZGUpXG5cblx0XHRcdGlmICh0eXBlID09PSBOT0RFX1RZUEVTLlBMQUNFSE9MREVSKSB7XG5cdFx0XHRcdGNoaWxkTm9kZS5wYXJhbU5hbWUgPSBzZWN0aW9uID09PSAnKicgPyBgXyR7X3VubmFtZWRQbGFjZWhvbGRlckN0cisrfWAgOiBzZWN0aW9uLnNsaWNlKDEpXG5cdFx0XHRcdG5vZGUucGxhY2Vob2xkZXJDaGlsZE5vZGUgPSBjaGlsZE5vZGVcblx0XHRcdFx0aXNTdGF0aWNSb3V0ZSA9IGZhbHNlXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IE5PREVfVFlQRVMuV0lMRENBUkQpIHtcblx0XHRcdFx0bm9kZS53aWxkY2FyZENoaWxkTm9kZSA9IGNoaWxkTm9kZVxuXHRcdFx0XHRjaGlsZE5vZGUucGFyYW1OYW1lID0gc2VjdGlvbi5zbGljZSgzIC8qIFwiKio6XCIgKi8pIHx8ICdfJ1xuXHRcdFx0XHRpc1N0YXRpY1JvdXRlID0gZmFsc2Vcblx0XHRcdH1cblxuXHRcdFx0bm9kZSA9IGNoaWxkTm9kZVxuXHRcdH1cblx0fVxuXG5cdC8vIFN0b3JlIHdoYXRldmVyIGRhdGEgd2FzIHByb3ZpZGVkIGludG8gdGhlIG5vZGVcblx0bm9kZS5kYXRhID0gZGF0YSBhcyBfUmFkaXhOb2RlRGF0YU9iamVjdFxuXG5cdC8vIE9wdGltaXphdGlvbiwgaWYgYSByb3V0ZSBpcyBzdGF0aWMgYW5kIGRvZXMgbm90IGhhdmUgYW55XG5cdC8vIHZhcmlhYmxlIHNlY3Rpb25zLCB3ZSBjYW4gc3RvcmUgaXQgaW50byBhIG1hcCBmb3IgZmFzdGVyIHJldHJpZXZhbHNcblx0aWYgKGlzU3RhdGljUm91dGUgPT09IHRydWUpIHtcblx0XHRjdHguc3RhdGljUm91dGVzTWFwW3BhdGhdID0gbm9kZVxuXHR9XG5cblx0cmV0dXJuIG5vZGVcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKGN0eDogUmFkaXhSb3V0ZXJDb250ZXh0LCBwYXRoOiBzdHJpbmcpIHtcblx0bGV0IHN1Y2Nlc3MgPSBmYWxzZVxuXHRjb25zdCBzZWN0aW9ucyA9IHBhdGguc3BsaXQoJy8nKVxuXHRsZXQgbm9kZSA9IGN0eC5yb290Tm9kZVxuXG5cdGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9ucykge1xuXHRcdG5vZGUgPSBub2RlLmNoaWxkcmVuLmdldChzZWN0aW9uKVxuXHRcdGlmICghbm9kZSkge1xuXHRcdFx0cmV0dXJuIHN1Y2Nlc3Ncblx0XHR9XG5cdH1cblxuXHRpZiAobm9kZS5kYXRhKSB7XG5cdFx0Y29uc3QgbGFzdFNlY3Rpb24gPSBzZWN0aW9uc1tzZWN0aW9ucy5sZW5ndGggLSAxXVxuXHRcdG5vZGUuZGF0YSA9IG51bGxcblx0XHRpZiAoT2JqZWN0LmtleXMobm9kZS5jaGlsZHJlbikubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb25zdCBwYXJlbnROb2RlID0gbm9kZS5wYXJlbnRcblx0XHRcdHBhcmVudE5vZGUuY2hpbGRyZW4uZGVsZXRlKGxhc3RTZWN0aW9uKVxuXHRcdFx0cGFyZW50Tm9kZS53aWxkY2FyZENoaWxkTm9kZSA9IG51bGxcblx0XHRcdHBhcmVudE5vZGUucGxhY2Vob2xkZXJDaGlsZE5vZGUgPSBudWxsXG5cdFx0fVxuXHRcdHN1Y2Nlc3MgPSB0cnVlXG5cdH1cblxuXHRyZXR1cm4gc3VjY2Vzc1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSYWRpeE5vZGUob3B0aW9uczogUGFydGlhbDxSYWRpeE5vZGU+ID0ge30pOiBSYWRpeE5vZGUge1xuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IG9wdGlvbnMudHlwZSB8fCBOT0RFX1RZUEVTLk5PUk1BTCxcblx0XHRwYXJlbnQ6IG9wdGlvbnMucGFyZW50IHx8IG51bGwsXG5cdFx0Y2hpbGRyZW46IG5ldyBNYXAoKSxcblx0XHRkYXRhOiBvcHRpb25zLmRhdGEgfHwgbnVsbCxcblx0XHRwYXJhbU5hbWU6IG9wdGlvbnMucGFyYW1OYW1lIHx8IG51bGwsXG5cdFx0d2lsZGNhcmRDaGlsZE5vZGU6IG51bGwsXG5cdFx0cGxhY2Vob2xkZXJDaGlsZE5vZGU6IG51bGxcblx0fVxufVxuXG5mdW5jdGlvbiBnZXROb2RlVHlwZShzdHI6IHN0cmluZykge1xuXHRpZiAoc3RyLnN0YXJ0c1dpdGgoJyoqJykpIHtcblx0XHRyZXR1cm4gTk9ERV9UWVBFUy5XSUxEQ0FSRFxuXHR9XG5cdGlmIChzdHJbMF0gPT09ICc6JyB8fCBzdHIgPT09ICcqJykge1xuXHRcdHJldHVybiBOT0RFX1RZUEVTLlBMQUNFSE9MREVSXG5cdH1cblx0cmV0dXJuIE5PREVfVFlQRVMuTk9STUFMXG59XG4iXSwibmFtZXMiOlsiTk9ERV9UWVBFUyIsIk5PUk1BTCIsIldJTERDQVJEIiwiUExBQ0VIT0xERVIiLCJjcmVhdGVSb3V0ZXIiLCJvcHRpb25zIiwiY3R4Iiwicm9vdE5vZGUiLCJjcmVhdGVSYWRpeE5vZGUiLCJzdGF0aWNSb3V0ZXNNYXAiLCJub3JtYWxpemVUcmFpbGluZ1NsYXNoIiwicCIsInN0cmljdFRyYWlsaW5nU2xhc2giLCJyZXBsYWNlIiwicm91dGVzIiwicGF0aCIsImluc2VydCIsImxvb2t1cCIsImRhdGEiLCJyZW1vdmUiLCJzdGF0aWNQYXRoTm9kZSIsInNlY3Rpb25zIiwic3BsaXQiLCJwYXJhbXMiLCJwYXJhbXNGb3VuZCIsIndpbGRjYXJkTm9kZSIsIm5vZGUiLCJ3aWxkQ2FyZFBhcmFtIiwiaSIsImxlbmd0aCIsInNlY3Rpb24iLCJ3aWxkY2FyZENoaWxkTm9kZSIsInNsaWNlIiwiam9pbiIsIm5leHROb2RlIiwiY2hpbGRyZW4iLCJnZXQiLCJ1bmRlZmluZWQiLCJwbGFjZWhvbGRlckNoaWxkTm9kZSIsInBhcmFtTmFtZSIsImlzU3RhdGljUm91dGUiLCJfdW5uYW1lZFBsYWNlaG9sZGVyQ3RyIiwiY2hpbGROb2RlIiwidHlwZSIsImdldE5vZGVUeXBlIiwicGFyZW50Iiwic2V0Iiwic3VjY2VzcyIsImxhc3RTZWN0aW9uIiwiT2JqZWN0Iiwia2V5cyIsInBhcmVudE5vZGUiLCJkZWxldGUiLCJNYXAiLCJzdHIiLCJzdGFydHNXaXRoIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQyxHQUNELE9BQU8sTUFBTUEsYUFBYTtJQUN6QkMsUUFBUTtJQUNSQyxVQUFVO0lBQ1ZDLGFBQWE7QUFDZCxFQUFDO0FBNERELE9BQU8sU0FBU0MsYUFDZkMsVUFBOEIsQ0FBQyxDQUFDLEVBQ2Y7SUFDakIsTUFBTUMsTUFBMEI7UUFDL0JEO1FBQ0FFLFVBQVVDO1FBQ1ZDLGlCQUFpQixDQUFDO0lBQ25CO0lBRUEsTUFBTUMseUJBQXlCLENBQUNDLElBQWVOLFFBQVFPLG1CQUFtQixHQUFHRCxJQUFJQSxFQUFFRSxPQUFPLENBQUMsT0FBTyxPQUFPLEdBQUc7SUFFNUcsSUFBSVIsUUFBUVMsTUFBTSxFQUFFO1FBQ25CLElBQUssTUFBTUMsUUFBUVYsUUFBUVMsTUFBTSxDQUFFO1lBQ2xDRSxPQUFPVixLQUFLSSx1QkFBdUJLLE9BQU9WLFFBQVFTLE1BQU0sQ0FBQ0MsS0FBSztRQUMvRDtJQUNELENBQUM7SUFFRCxPQUFPO1FBQ05UO1FBQ0Esa0NBQWtDO1FBQ2xDVyxRQUFRLENBQUNGLE9BQWlCRSxPQUFPWCxLQUFLSSx1QkFBdUJLO1FBQzdEQyxRQUFR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